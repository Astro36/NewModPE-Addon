/*
 LGPL-3.0
*/
var Utils_=net.zhuoweizhang.mcpelauncher.Utils,PATH_FREE="/sdcard/games/com.mojang/RethodPE for Free.apk",PATH_PRO="/sdcard/games/com.mojang/RethodPE for Pro.apk",PATH_DEX="/sdcard/games/com.mojang/RethodPEDex.dex",ADDON_URL_FREE="https://github.com/ljuwon321/RethodPE-APK/raw/master/VERSION/RethodPE%20for%20FREE.apk",ADDON_URL_PRO="https://github.com/ljuwon321/RethodPE-APK/raw/master/VERSION/RethodPE%20for%20PRO.apk",DEX_URL="https://github.com/ljuwon321/RethodPE-APK/raw/master/VERSION/Dex/RethodPEDex.dex", GITHUB_URL="https://github.com/ljuwon321/RethodPE-APK",VERSIONS=["1.0.0.16","1.0.2.1"],NAME="RethodPE Downloader",NAME_CODE="rethodpe_downloader",VERSION="1.0",DEVELOPER="Astro",LICENSE_TEXT="RethodPE Downloader is licensed under the GNU Lesser General Public License, Version 3 (LGPL-3.0).",CONTEXT,DP,PATH,theme,icDownloadBitmap;function RethodPE(){this._addonManager=new me.astro.utils.AddonManager("com.ljuwon.rethodpe")}RethodPE.prototype.getUrl=function(){return this._githubUrl}; RethodPE.prototype.install=function(){var b=this._addonManager,a=ModPE.getMinecraftVersion();me.astro.utils.File.download(PATH_DEX,DEX_URL.replace("VERSION",a));for(var c=VERSIONS.length;c--;)if(a===VERSIONS[c]){Utils_.isPro()?b.download(PATH_PRO,ADDON_URL_PRO.replace("VERSION",a)):b.download(PATH_FREE,ADDON_URL_FREE.replace("VERSION",a));return}me.astro.widget.Toast.show("Error: This version is not supported. Check your Minecraft PE version.")};RethodPE.prototype.isEnabled=function(){return this._addonManager.isEnabled()}; RethodPE.prototype.isInstalled=function(){return null!==CONTEXT.getPackageManager().getLaunchIntentForPackage("com.ljuwon.rethodpe")};RethodPE.prototype.setEnabled=function(){this._addonManager.setEnabled()}; function showInstaller(){var b=new RethodPE;CONTEXT.runOnUiThread({run:function(){try{var a=new me.astro.widget.Window(theme);a.addLayout(icDownloadBitmap,(new me.astro.widget.Layout(theme)).addView((new me.astro.widget.TextView).setPadding(8*DP,16*DP,8*DP,4*DP).setText("Installer").setTextSize(24).show()).addView((new me.astro.widget.TextView).setText("Install the addon").setTextSize(14).show()).addView((new me.astro.widget.Button(theme)).setText("Install").setEffect(function(){return b.install()}).show()).addView((new me.astro.widget.TextView).setText("Enable the addon").setTextSize(14).show()).addView((new me.astro.widget.Button(theme)).setText("Enable").setEffect(function(){return b.setEnabled()}).show()).addView((new me.astro.widget.TextView).setText("After you install and enable the addon, restart BlockLauncher.").setTextColor(me.astro.design.Color.GREY_DARK).show()).addView((new me.astro.widget.Button(theme)).setText("Close").setEffect(function(){return a.dismiss()}).show()).show()).addLayout(me.astro.design.Bitmap.createBitmap(PATH+"ic_info_outline.png"), (new me.astro.widget.Layout(theme)).addView((new me.astro.widget.TextView).setPadding(8*DP,16*DP,8*DP,4*DP).setText("Script Info").setTextSize(24).show()).addView((new me.astro.widget.TextView).setText(NAME+" "+VERSION+"\n\nName Code: "+NAME_CODE+"\nDeveleoper: "+DEVELOPER+"\n\n").setTextColor(me.astro.design.Color.GREY_DARK).show()).addView((new me.astro.widget.TextView).setPadding(8*DP,16*DP,8*DP,4*DP).setText("License").setTextSize(24).show()).addView((new me.astro.widget.TextView).setText(LICENSE_TEXT).setTextColor(me.astro.design.Color.GREY_DARK).show()).addView((new me.astro.widget.Button(theme)).setText("Close").setEffect(function(){return a.dismiss()}).show()).show()).setFocusable(!0).show()}catch(c){print(c)}}})} function showEditor(){var b=new RethodPE;CONTEXT.runOnUiThread({run:function(){try{var a=new me.astro.widget.Window(theme);a.addLayout(me.astro.design.Bitmap.createBitmap(PATH+"ic_edit.png"),function(){return b.isInstalled()&&b.isEnabled()&&"undefined"!==typeof R_Player?(new me.astro.widget.Layout(theme)).addView((new me.astro.widget.TextView).setPadding(8*DP,16*DP,8*DP,4*DP).setText("Editor").setTextSize(24).show()).addView((new me.astro.widget.TextView).setText("Prevent block destruction").setTextSize(14).show()).addView((new me.astro.widget.Layout(theme)).addView((new me.astro.widget.Button(theme)).setText("On").setEffect(function(){return R_Server.protectBlock(!0)}).show()).addView((new me.astro.widget.Button(theme)).setText("Off").setEffect(function(){return R_Server.protectBlock(!1)}).show()).setOrientation(0).show()).addView((new me.astro.widget.TextView).setText("Disable join to the server").setTextSize(14).show()).addView((new me.astro.widget.Layout(theme)).addView((new me.astro.widget.Button(theme)).setText("On").setEffect(function(){return R_Server.enableJoin(!1)}).show()).addView((new me.astro.widget.Button(theme)).setText("Off").setEffect(function(){return R_Server.enableJoin(!0)}).show()).setOrientation(0).show()).addView((new me.astro.widget.TextView).setText("Keep player inventory").setTextSize(14).show()).addView((new me.astro.widget.Layout(theme)).addView((new me.astro.widget.Button(theme)).setText("On").setEffect(function(){return R_Player.enableInventorySave(!0)}).show()).addView((new me.astro.widget.Button(theme)).setText("Off").setEffect(function(){return R_Player.enableInventorySave(!1)}).show()).setOrientation(0).show()).addView((new me.astro.widget.TextView).setText("Stop moving arrows").setTextSize(14).show()).addView((new me.astro.widget.Layout(theme)).addView((new me.astro.widget.Button(theme)).setText("On").setEffect(function(){return R_Arrow.setPause(!0)}).show()).addView((new me.astro.widget.Button(theme)).setText("Off").setEffect(function(){return R_Arrow.setPause(!1)}).show()).setOrientation(0).show()).addView((new me.astro.widget.Button(theme)).setText("Close").setEffect(function(){return a.dismiss()}).show()).show(): (new me.astro.widget.Layout(theme)).addView((new me.astro.widget.TextView).setPadding(8*DP,16*DP,8*DP,4*DP).setText("Error").setTextSize(24).show()).addView((new me.astro.widget.TextView).setText("Enable RethodPE addon").setTextSize(14).show()).addView((new me.astro.widget.Button(theme)).setText("Close").setEffect(function(){return a.dismiss()}).show()).show()}()).setFocusable(!0).show()}catch(c){print(c)}}})} function onLibraryLoaded(b,a,c){"me_astro_library"===a&&(CONTEXT=me.astro.getContext(),DP=CONTEXT.getResources().getDisplayMetrics().density,PATH=me.astro.getPath(),theme=new me.astro.design.Theme({primary:me.astro.design.Color.RED,primaryDark:me.astro.design.Color.RED_DARK,accent:me.astro.design.Color.RED_ACCENT}),icDownloadBitmap=me.astro.design.Bitmap.decodeBase64("iVBORw0KGgoAAAANSUhEUgAAAMAAAADAAgMAAAAvsoSUAAAADFBMVEUAAAD///////////84wDuoAAAABHRSTlMA/wCA4LPRVwAAAQFJREFUeAHt1KFtA1AMRdEs+VXWQTqSLUOP4iUyRWmk/MOrxo8fcMl77P7+drvdeVm87RFvW7BgwYIFCxYs+BAwh/u6gjb4voIy+LmCNHjeo8cJd9BMACgmACQTAGKYANBMACgmACQTAGKYANBMACgmACQTAGKYANBMACgmACQTAGKYANBMACgmACQTAGKYANBMACgmACQTAGKYANBMACgmACQTAGKYANBMACgkECQSCGKQQNBIICgkECQSCGKQQNBIICgkECQSCGKQQNBIICgkECQSCGKQQNBIICgkECQSCGKQQNBIICgkEOSTQPtosGDB8c6CBf8c7Al4CxYsWLDgF/MZlb0HdH39AAAAAElFTkSuQmCC"), me.astro.widget.NotificationWindow.getInstance().addNotification("RethodPE","BlockLauncher addon which improves ModPE API."),CONTEXT.runOnUiThread({run:function(){me.astro.getWindow().addView((new me.astro.widget.ImageButton(me.astro.design.Shape.CIRCLE,theme)).setEffect(showInstaller).setEffectImage(me.astro.design.Bitmap.resizeBitmap(icDownloadBitmap,24*DP,24*DP)).setImage(me.astro.design.Bitmap.resizeBitmap(icDownloadBitmap,24*DP,24*DP)).show()).addView((new me.astro.widget.ImageButton(me.astro.design.Shape.CIRCLE, theme)).setEffect(showEditor).setEffectImage(me.astro.design.Bitmap.resizeBitmap(me.astro.design.Bitmap.createBitmap(PATH+"ic_edit.png"),24*DP,24*DP)).setImage(me.astro.design.Bitmap.resizeBitmap(me.astro.design.Bitmap.createBitmap(PATH+"ic_edit.png"),24*DP,24*DP)).show())}}))}function preventChat(){CONTEXT.nativeSetTextboxText("");CONTEXT.updateTextboxText("")} function chatHook(b){if("undefined"!==typeof CONTEXT){var a=new RethodPE;".install"===b?(preventDefault(),preventChat(),a.install()):".enable"===b?(preventDefault(),preventChat(),a.setEnabled()):".installer"===b?(preventDefault(),preventChat(),showInstaller()):".editor"===b&&(preventDefault(),preventChat(),showEditor())}};